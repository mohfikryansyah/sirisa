import{r as u,j as l}from"./app-BLQvmwDf.js";import{u as C,b as h,l as c,a as m,e as y,d as M,M as x,T as b}from"./leaflet-Bq3Iwqkr.js";import{c as j}from"./utils-CytzSlOG.js";import"./index-uYqOO2L-.js";function p(){return C().map}function E(t,n){const e=p();return u.useEffect(function(){return e.on(t,n),function(){e.off(t,n)}},[e,t,n]),e}const v=h(function({position:n,...e},a){const o=new c.Marker(n,e);return m(o,y(a,{overlayContainer:o}))},function(n,e,a){e.position!==a.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==a.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==a.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==a.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==a.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),z=M(function(n,e){const a=new c.Popup(n,e.overlayContainer);return m(a,e)},function(n,e,{position:a},o){u.useEffect(function(){const{instance:i}=n;function r(f){f.popup===i&&(i.update(),o(!0))}function d(f){f.popup===i&&o(!1)}return e.map.on({popupopen:r,popupclose:d}),e.overlayContainer==null?(a!=null&&i.setLatLng(a),i.openOn(e.map)):e.overlayContainer.bindPopup(i),function(){var g;e.map.off({popupopen:r,popupclose:d}),(g=e.overlayContainer)==null||g.unbindPopup(),e.map.removeLayer(i)}},[n,e,o,a])}),I=({onCoordinatesChange:t,currentLocation:n})=>{const e=p();return u.useEffect(()=>{n&&e.setView([n.lat,n.lng])},[n,e]),E("click",a=>{const{lat:o,lng:s}=a.latlng;t({lat:o,lng:s})}),null},O=new c.Icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowAnchor:[10,41],shadowSize:[41,41]}),P=()=>{const t=p();return u.useEffect(()=>{t&&setTimeout(()=>{t.invalidateSize()},100)},[t]),null};function A({onCoordinatesChange:t,currentLocation:n,className:e}){const[a,o]=u.useState(null);u.useEffect(()=>{n&&o(n)},[n]);const s=i=>{o({lat:Number(i.lat),lng:Number(i.lng)}),t(i)};return l.jsx("div",{className:j("map-container",e),children:l.jsxs(x,{center:[.556174,123.058548],zoom:13,style:{height:"100%",width:"100%"},children:[l.jsx(b,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.jsx(P,{}),l.jsx(I,{onCoordinatesChange:s,currentLocation:n}),a&&l.jsx(v,{position:a,icon:O,children:l.jsxs(z,{children:["Latitude: ",a.lat,", Longitude:"," ",a.lng]})})]})})}export{A as default};
