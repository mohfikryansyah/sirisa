import{r as i,j as P}from"./app-jpxFdiu3.js";import{u as h}from"./index-DmtYoZeG.js";function y(n,e){const t=i.createContext(e),r=m=>{const{children:s,...a}=m,c=i.useMemo(()=>a,Object.values(a));return P.jsx(t.Provider,{value:c,children:s})};r.displayName=n+"Provider";function o(m){const s=i.useContext(t);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${m}\` must be used within \`${n}\``)}return[r,o]}function I(n,e=[]){let t=[];function r(m,s){const a=i.createContext(s),c=t.length;t=[...t,s];const u=f=>{var A;const{scope:d,children:l,...N}=f,x=((A=d==null?void 0:d[n])==null?void 0:A[c])||a,M=i.useMemo(()=>N,Object.values(N));return P.jsx(x.Provider,{value:M,children:l})};u.displayName=m+"Provider";function p(f,d){var x;const l=((x=d==null?void 0:d[n])==null?void 0:x[c])||a,N=i.useContext(l);if(N)return N;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${m}\``)}return[u,p]}const o=()=>{const m=t.map(s=>i.createContext(s));return function(a){const c=(a==null?void 0:a[n])||m;return i.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return o.scopeName=n,[r,E(o,...e)]}function E(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(m){const s=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(m)[`__scope${u}`];return{...a,...f}},{});return i.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}var g=globalThis!=null&&globalThis.document?i.useLayoutEffect:()=>{};function O(n,e){return i.useReducer((t,r)=>e[t][r]??t,n)}var S=n=>{const{present:e,children:t}=n,r=C(e),o=typeof t=="function"?t({present:r.isPresent}):i.Children.only(t),m=h(r.ref,w(o));return typeof t=="function"||r.isPresent?i.cloneElement(o,{ref:m}):null};S.displayName="Presence";function C(n){const[e,t]=i.useState(),r=i.useRef({}),o=i.useRef(n),m=i.useRef("none"),s=n?"mounted":"unmounted",[a,c]=O(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const u=v(r.current);m.current=a==="mounted"?u:"none"},[a]),g(()=>{const u=r.current,p=o.current;if(p!==n){const d=m.current,l=v(u);n?c("MOUNT"):l==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(p&&d!==l?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,c]),g(()=>{if(e){let u;const p=e.ownerDocument.defaultView??window,f=l=>{const x=v(r.current).includes(l.animationName);if(l.target===e&&x&&(c("ANIMATION_END"),!o.current)){const M=e.style.animationFillMode;e.style.animationFillMode="forwards",u=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=M)})}},d=l=>{l.target===e&&(m.current=v(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{p.clearTimeout(u),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:i.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function v(n){return(n==null?void 0:n.animationName)||"none"}function w(n){var r,o;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{S as P,y as a,I as c,g as u};
