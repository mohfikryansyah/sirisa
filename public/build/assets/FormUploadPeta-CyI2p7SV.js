import{r as i,j as e,S as f,k as m}from"./app-jpxFdiu3.js";import{B as d}from"./button-DFiIpXHy.js";import{u as b,F,a as c,b as u,c as p,d as h,e as j,f as D,t as S,G as k}from"./zod-Cr-jfb8y.js";import{I as B}from"./input-sCvv8Ed4.js";import{D as v,a as C,b as N,c as P,d as E,e as T}from"./dialog-CMlB6sv6.js";import"./index-DmtYoZeG.js";import"./index-QvnuX-2d.js";import"./index-CAvpFn2P.js";import"./utils-CytzSlOG.js";import"./index-DxXyfUP5.js";import"./index-BUn0ckgb.js";import"./index-DXERiLlJ.js";import"./proxy-BDDIYTb7.js";import"./label-CMYHcBC1.js";import"./index-CMcHF0wh.js";function A(){const a=b({resolver:S(k),defaultValues:{title:"",path:void 0},mode:"onChange"}),[o,t]=i.useState(!1),[x,l]=i.useState(!1);function g(r){console.table(r),f.post(route("geo-location.store"),r,{preserveScroll:!0,onSuccess:()=>{a.reset(),t(!o),m.success("Berhasil menambahkan data peta"),l(!1)},onError:s=>{console.log(s),m.error("Terjadi Kesalahan"),Object.keys(s).forEach(n=>{a.setError(n,{type:"server",message:s[n]})})}})}return e.jsxs(v,{open:x,onOpenChange:l,children:[e.jsx(C,{asChild:!0,children:e.jsx(d,{variant:"default",className:"rounded-xl",children:"Buat Data Baru"})}),e.jsx(N,{children:e.jsxs(P,{children:[e.jsx(E,{children:"Buat Peta Baru"}),e.jsx(T,{children:"Tambahkan Peta Baru dengan Format File .json"}),e.jsx("div",{className:"pt-5",children:e.jsx(F,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(g),className:"space-y-2",encType:"multipart/form-data",children:[e.jsx(c,{control:a.control,name:"title",render:({field:r})=>e.jsxs(u,{children:[e.jsx(p,{children:"Judul Peta"}),e.jsx(h,{children:e.jsx(B,{placeholder:"Contoh: Peta Kawasan Rawan Banjir",...r,className:"focus-visible:ring-[#063b3e]"})}),e.jsx(j,{})]})}),e.jsx(c,{control:a.control,name:"path",render:()=>e.jsxs(u,{children:[e.jsx(p,{children:"Dokumen Pendukung"}),e.jsx(h,{children:e.jsx("div",{className:"w-full mx-auto min-h-[33vh] border border-dashed bg-white dark:bg-black border-neutral-200 dark:border-neutral-800 rounded-lg",children:e.jsx(D,{onChange:r=>a.setValue("path",r),multiple:!1,resetFileUpload:o,setResetFileUpload:t})})}),e.jsx(j,{})]})}),e.jsx("div",{className:"pt-2",children:e.jsx(d,{type:"submit",className:"",children:"Submit"})})]})})})]})})]})}export{A as default};
